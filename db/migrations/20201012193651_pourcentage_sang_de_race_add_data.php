<?php
declare(strict_types=1);

use Phinx\Migration\AbstractMigration;

final class PourcentageSangDeRaceAddData extends AbstractMigration
{
    /**
     * Change Method.
     *
     * Write your reversible migrations using this method.
     *
     * More information on writing migrations is available here:
     * https://book.cakephp.org/phinx/0/en/migrations.html#the-change-method
     *
     * Remember to call "create()" or "update()" and NOT "save()" when working
     * with the Table class.
     */
    public function up()
    {
        $builder = $this->getQueryBuilder();
        $statement_bordelaise = $builder->update('animal')
          ->set('fondateur', 1)
          ->where(function ($exp) {
            $animal_ids_bordelaise = ["3301440238","3310570666","3340003032","6403592945","3310231301","3310280111","3211460078","6410629043","6411748494","4486049980","4787000337","8515550920","4000330741","6412138618","3310414449","3320493095","3320483039","4444444444","3310233457","3320493102","5689018128","4489040072","6412211158",
            "6403864461","3301393418","4490045167","3320503164","3301472543","6403933503","3251451504","8191001223","3320081203","3320031757","3310231300","6404299757","0000000001","33100545520","2475007516","4003454994","3196013577","6403708257","3301420045","2479040001","3330046631","3301563040","4714021076","4747204879","6411654502",
            "4747205424","4747328837","4747240036","3320477465","0000000002","3320025028","0996008786","3301203708","0997005909","1598072986","1111111140","1111111127","4003641251","4011404363","1111111120","6411437797","4747225541","1111111125","1111111131","1111111122","1111111113","3310500892","1111111114","1111111123","1111111130",
            "0000000003","1111111121","1111111112","1111111119","1111111116","1111111117","1111111111","1111111126","1111111115","1111111124","1111111118","3301433394","2402536332","3320014004","3150180724","2402879683","2402700619","3320031758","3320021736","3310055745","3320036728","4004011586","3320055316","5682022090","4783012358",
            "2922121956","6403552951","3320082778","3310223857"];
            $code_race=5;
            return $exp
              ->eq('code_race', $code_race)
              ->in('no_identification', $animal_ids_bordelaise);
          })
          ->execute();
        //var_dump($statement_bordelaise->fetchAll());

        $builder = $this->getQueryBuilder();
        $statement_marine = $builder->update('animal')
          ->set('fondateur', 1)
          ->where(function ($exp) {
            $animal_ids_marine = ["3310088030","3340024048","3310511070","3310510834","3310523166","4004417318","4004431382","3310578588","3310519153","3310174957","3340024044","3340025633","3310516326","3310553908","3310564443","3310560838","3310564446","3310581766","3310561668","3310578590","3310581768","3310581769","3310594422",
            "3310174959","3310006218","4004294145","3310523171","3310519152","3310530194","4004366174","3310532743","4004379518","3310547387","4004379523","3310546221","3310551492","3310546231","4004402282","3310547038","4004402284","3310564444","3310560839","3310560841","3310567622","3310564445","3310567624","3310577976","3310577974",
            "3310577977","3310577978","3310577979","3310585185","3310577980","3310585186","3310585187","3310585188","3310585189","3310594412","3310594413","3310594414","3310594415","3310394359","4004281809","3310100393","3310195032","3310399681","3340013017","3340018986","3310399686","3340018992","4004294149","3340024047","4004294147",
            "4004294148","4004334487","4004334488","3340025638","3310519151","3310510837","3310510839","4004334489","3310523169","3310523170","3310523172","4004334908","4004366173","4004366175","4004379521","4004379515","3310532745","3310547390","4004379514","3310530201","4004379516","4004379517","4004379520","3310547388","4004379522",
            "3310546222","3310551490","3310547391","4004402289","4004402290","4004402291","4004402285","4004413468","4004402287","3310547395","4004402288","4004413469","4004413471","4004413472","4004417319","4004417321","3310550704","4004417322","4004417323","4004417324","4004417325","4004417326","4004417327","4004431376","4004431378",
            "4004431379","4004431380","4004431381","4004431383","4004431384","4004439611","4004431385","4004439613","4004439614","4004439615","4004439616","4004439617","4004439618","4004439619","4004439620","4004454545","4004454546","4004454548","4004454547","4004454550","4004454549","4004454551","4004454552","4004454553","4004459120",
            "4004459121","4004459122","4004459123","4004459124","4004454544","4004459125","4004459126","4004459127","4004459128","4004459129","4004459130","4004459132","4004334906","4004379519","4004402283","4004402286","4004413470","3310052861","3340018988","3310516327","4004334905","3310516328","3310523168","3310523174","3310546224",
            "3310551491","3310551493","3310560840","3340025639","4004431377","4004334907","3310578589","3310553915","3310561659","3310567250","3310574317","3310574318","3310598151","3310195033","3340013015","3310429963","3340018075","3340018987","3340018991","3340024040","3340025631","3340024041","3310507202","3310507204","3310507206",
            "3310516330","4004334909","3310539902","3310546226","3310546228","3310547392","3310553906","3310553907","3310553912","3310547394","3310553916","3310553917","3310561661","3310567249","3310574307","3310574309","3310574308","3310574310","3310574311","3310574314","3310574313","3310574315","3310574316","3310598149","3310598150",
            "0000004578","1587032423","0000000007","4003370574","4003370743","4003330738","0910915485","0911216623","00000000008","4003370579","3340012182","4003370577","4003370739","4003330740","0000000001","3301454751","3301454752","3301454753","3301454754","3301476681","3301553339","3301553343","3301553340","3301553350","3301553348",
            "3301553341","3301553347","3301553342","3301553344","3301553346","3301553345","3301553349","3301553351","3301578292","3301578291","3301578294","3301578293","0000000002","0000000006","3310012249","3310012251","3310012248","3310012250","3310012254","3310012253","3310012252","3310012255","3310012256","3310052859","3310052860",
            "3310133577","031520169488","7949970025","3340007812","3310133578","3310133579","3310174956","3310195030","3310174958","3310269704","3310143825","3310113194","3340013013","3340013014","3340013016","3310313040","3310394360","3340019964","3340019965","3340018071","3310429962","3340018073","3310399685","3340018990","3340018994",
            "4004281810","3340025634","3340025632","3340024043","3340024049","4004294146","3340025636","3340025635","3340025637","3310523175","3310530192","3310530195","3210532752","3310539907","3310539900","3310532749","3310532751","3310532747","3310530197","3310530199","3310530198","3310539906","3310539905","3310532746","3310532750",
            "3310546223","3310546227","3310553913","3310546232","3310547389","3310546230","3310553909","3310546220","3310546229","3310553910","3310553903","3310553911","3310553905","3310553902","3310577975","3310581767","3310403826","3310429961","3340018989","3340024042","3340024045","3340024046","3310510832","3310510835","3310510836",
            "3310523173","4004366172","3310532744","3310532748","3310539898","3310539899","3310539904","3310539903","3310546219","3310546225","3310546233","4004439612","3310574312","3310553918","3310553919","3310553920","3310553921","3310582366","3310582367","3310582368","3310582369","3310582370","3310582371","3310582372","3310582373",
            "3310582374","3310582375","3310582376","3310582377","3310582378","3310582379","3340007811","3310195031","3310100051","3310313039","3310429960","3310510831","4004366176","3310530200","3310537633","3310553914","3310547393","4004410823","3310547396","3310561660","3310561662","4004432663","3310561663","3310561664","3310561665",
            "3310561666","3310561667"];
            $code_race=6;
            return $exp
              ->eq('code_race', $code_race)
              ->in('no_identification', $animal_ids_marine);
          })
          ->execute();
        //var_dump($statement_marine->fetchAll());
    }

    public function down() {
      $builder = $this->getQueryBuilder();
      $statement = $builder->update('animal')
        ->set('fondateur', 0)
        ->execute();
    }
}
